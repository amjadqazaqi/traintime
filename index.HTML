<!DOCTYPE html>
<html lang="en-us">

<head>

    <meta charset="UTF-8">
    <title>Sign-Up Today!</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">

</head>

<body>

    <div class="container">

        <br>

        <!-- Jumbotron -->
        <div class="jumbotron">
            <h1 class="text-center">California Train Co..</h1>
        </div>
        <div class="row">

            <!-- Sign-Up Panel-->
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Train schedule</h3>
                    </div>
                    <div class="panel-body">

                        <!-- Sign-up Form (note the various input "types")-->
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Train Name</th>
                                    <th>Destination</th>
                                    <th>Frequency</th>
                                    <th>Next Arrival</th>
                                    <th>Minuts Away</th>

                                </tr>
                            </thead>
                            <tbody id="mytable">



                            </tbody>
                        </table>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Sign-Up Panel-->
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Add employee</h3>
                    </div>
                    <div class="panel-body">

                        <!-- Sign-up Form (note the various input "types")-->
                        <form role="form">
                            <div class="form-group">
                                <label for="trainName-input">Train Name</label>
                                <input class="form-control" id="trainName-input" type="text">
                            </div>
                            <div class="form-group">
                                <label for="destination-input">Destination</label>
                                <input class="form-control" id="destination-input" type="text">
                            </div>
                            <div class="form-group">
                                <label for="firstTrainTime-input">First Train Time (military time)</label>
                                <input class="form-control" id="firstTrainTime-input" type="time">
                            </div>
                            <div class="form-group">
                                <label for="frequency">Frequency</label>
                                <input class="form-control" id="frequency-input" type="text">
                            </div>
                            <button class="btn btn-default" id="add-train" type="submit">Submit</button>
                            <button class="btn btn-default" id="test" type="submit">ok</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Most Recent Member Panel-->


        </div>

    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>

    <!-- LINK TO FIREBASE GOES HERE -->
    <script src="https://www.gstatic.com/firebasejs/4.11.0/firebase.js"></script>


    <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>


    <!-- Script -->
    <script>
        //  START CODING BELOW!!

        // Initialize Firebase

        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyC4AhesYq8zRcZiit_jZj7AEjIP4v2kyiw",
            authDomain: "alqazqi123.firebaseapp.com",
            databaseURL: "https://alqazqi123.firebaseio.com",
            projectId: "alqazqi123",
            storageBucket: "alqazqi123.appspot.com",
            messagingSenderId: "136215056714"
        };
        firebase.initializeApp(config);


        /*  var config = {
            apiKey: "AIzaSyB-Cm9wt0XL4W_uXDGIfqKmqYYuk94-8d8",
            authDomain: "train-time-df5e4.firebaseapp.com",
            databaseURL: "https://train-time-df5e4.firebaseio.com",
            projectId: "train-time-df5e4",
            storageBucket: "train-time-df5e4.appspot.com",
            messagingSenderId: "901917425737"
          };*/
        // firebase.initializeApp(config);

        // Create a variable to reference the database
        var database = firebase.database();
        var trainName = "";
        var destination = "";
        var firstTrainTime = "";
        var frequency = "";




        $("#add-train").on("click", function (event) {

            event.preventDefault();

            trainName = $("#trainName-input").val().trim();
            destination = $("#destination-input").val().trim();
            firstTrainTime = $("#firstTrainTime-input").val().trim();
            frequency = $("#frequency-input").val().trim();
            // mydate= $("#firstTrainTime-input").val().trim();


            // Code in the logic for storing and retrieving the most recent user.
            database.ref().push({
                trainName: trainName,
                destination: destination,
                firstTrainTime: firstTrainTime,
                frequency: frequency

            });
        });
        // Don't forget to provide initial data to your Firebase database.
        // Firebase watcher + initial loader HINT: .on("value")
        // dataref.ref().on("child_added",function(snapshot)){

        // });


        $("#test").on("click", function (event) {
            // var randomDate =  new Date();
            //  randomDate = Date.now() ;
            var day = "03/16/18 01:58"
            var cuu = moment();
            var randomFormat = "MM/DD/YYYY hh:mm:ss";
            var convertedDate = moment(day, randomFormat);
            var now  = "04/09/2013 15:00:00";
var then = "02/09/2013 14:20:30";

var ms = moment(now,"DD/MM/YYYY HH:mm:ss").diff(moment(then,"DD/MM/YYYY HH:mm:ss"));
var d = moment.duration(ms);
alert(moment())

        });

        database.ref().on("child_added", function (snapshot) {

            // var m =snapshot.val().trainName;

            var a = snapshot.val().trainName
            var b = snapshot.val().destination
            var c = snapshot.val().firstTrainTime
            var d = snapshot.val().frequency
            // 6 years ago

            console.log(snapshot.val().trainName, snapshot.val().destination, snapshot.val().firstTrainTime, snapshot.val().frequency)
            addrow(a, b, c, d)

        });
        // database.ref().on("value", function (snapshot) {


        /* $("#trainName-display").text("Train Name: " + snapshot.val().trainName);
         $("#destination-display").text("Destination: " + snapshot.val().destination);
         $("#firstTrainTime-display").text("Train Time: " + snapshot.val().firstTrainTime);*/
        //  })


        function addrow(a, b, c, d, e) {


            $("#mytable").append('<tr><td>' + a + '</td> <td>' + b + '</td><td>' + d + '</td><td>' + c + '</td></tr>')

            /*   var tr = $("<tr>"),
               td = $("<td>").appendTo(tr), 
               input = $("input",{type:"text",value:"Enter some text"}).appendTo(td);
               tr.appendTo("#someTable tr");*/






        }

      // Create Error Handling
    </script>

</body>

</html>